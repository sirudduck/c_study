# 프로그램은 어떻게 실행되는가?

## 학습 목표

이 자료를 통해 다음을 이해할 수 있습니다:
- C 프로그램이 작성되고 실행되는 과정
- 컴파일이 무엇인지
- 운영체제가 프로그램을 실행시키는 방법

---

## 1. 컴퓨터 = 자동 계산기

컴퓨터는 결국 **명령어를 자동으로 실행하는 기계**입니다. 우리가 할 일은:
1. 컴퓨터가 이해할 수 있는 명령어를 작성하고
2. 그 명령어를 실행시키는 것

---

## 2. 프로그램 실행의 3단계

### 2.1 단계 1: 소스 코드 작성

우리가 작성하는 C 프로그램은 **텍스트 파일**입니다.

```c
#include <stdio.h>

int main(void) {
    printf("Hello, World!\n");
    return 0;
}
```

이 파일 이름을 `hello.c`라고 하겠습니다. 
- `.c`는 C 언어 소스 코드를 의미하는 확장자입니다
- 이 파일은 우리가 읽을 수 있는 **텍스트**입니다

### 2.2 단계 2: 컴파일 (Compilation)

컴퓨터의 CPU는 텍스트를 읽지 못합니다. CPU가 이해하는 것은 오직 **기계어(Machine Code)**입니다.

**컴파일**은 우리가 작성한 텍스트 코드를 CPU가 실행할 수 있는 기계어로 변환하는 과정입니다.

```
hello.c  ──────[컴파일러]──────>  hello
(텍스트)                        (실행 파일)
```

터미널에서 이렇게 입력합니다:
```bash
clang hello.c -o hello
```

이 명령어가 하는 일:
- `clang`: 컴파일러 프로그램
- `hello.c`: 변환할 소스 코드 파일
- `-o hello`: 출력 파일 이름을 `hello`로 지정

결과로 `hello`라는 **실행 파일**이 생성됩니다.

### 2.3 단계 3: 실행

이제 프로그램을 실행할 수 있습니다:

```bash
./hello
```

화면에 다음이 출력됩니다:
```
Hello, World!
```

---

## 3. 운영체제의 역할

프로그램을 실행하면 **운영체제(OS)**가 다음 일들을 수행합니다:

### 3.1 프로그램 로드

```
┌────────────────────────┐
│    저장장치 (SSD)       │  
│  hello (실행 파일)      │  ← 컴파일된 프로그램이 저장된 곳
└────────────────────────┘
           │
           │ 운영체제가 파일을 읽어와서
           ↓
┌────────────────────────┐
│    메모리 (RAM)         │
│  hello 프로그램         │  ← 실행되는 동안 여기에 있음
└────────────────────────┘
```

운영체제가 실행 파일을 저장장치에서 메모리로 복사합니다. 
프로그램은 메모리에 있어야만 실행될 수 있습니다.

### 3.2 CPU에게 작업 할당

```
┌─────────────────────────────────────────┐
│         운영체제 (macOS/Linux)          │
│                                          │
│  ┌────────────┐  ┌────────────┐        │
│  │ 웹 브라우저 │  │ 우리 프로그램│       │
│  └────────────┘  └────────────┘        │
│        ↓              ↓                  │
│     CPU 시간 배분 (멀티태스킹)          │
└─────────────────────────────────────────┘
```

컴퓨터에는 여러 프로그램이 동시에 실행됩니다. 운영체제가 각 프로그램에 CPU 시간을 나눠줍니다.

### 3.3 입출력 처리

우리 프로그램이 `printf()`를 호출하면:

```
우리 프로그램:  printf("Hello, World!\n");
       ↓
운영체제:      화면에 출력 요청을 받음
       ↓
하드웨어:      실제로 화면에 텍스트 표시
```

프로그램은 화면에 직접 접근할 수 없습니다. 반드시 운영체제를 통해야 합니다.
- **이유**: 여러 프로그램이 동시에 화면에 쓰려고 하면 충돌이 발생하기 때문
- **운영체제의 역할**: 교통정리를 해서 순서대로 출력하게 함

### 3.4 프로그램 종료

```c
return 0;
```

이 명령을 만나면:
1. 프로그램이 운영체제에 "작업 완료"를 알립니다
2. 운영체제가 프로그램이 사용하던 메모리를 회수합니다
3. 터미널이 다시 명령을 받을 준비를 합니다

---

## 4. 전체 흐름 정리

```
1. 소스 코드 작성
   ↓
   hello.c (텍스트 파일)
   
2. 컴파일
   ↓
   clang hello.c -o hello
   ↓
   hello (실행 파일, 기계어)
   
3. 실행
   ↓
   ./hello
   ↓
   운영체제가 메모리에 로드
   ↓
   CPU가 명령어 실행
   ↓
   printf → 운영체제 → 화면 출력
   ↓
   return 0 → 프로그램 종료
```

---

## 5. 핵심 용어 정리

| 용어 | 설명 |
|------|------|
| **소스 코드** | 우리가 작성한 C 언어 텍스트 파일 (`.c`) |
| **컴파일** | 소스 코드를 기계어로 변환하는 과정 |
| **컴파일러** | 컴파일을 수행하는 프로그램 (clang, gcc 등) |
| **실행 파일** | CPU가 직접 실행할 수 있는 기계어 파일 |
| **운영체제** | 프로그램 실행과 자원 관리를 담당하는 시스템 소프트웨어 |
| **메모리(RAM)** | 프로그램이 실행되는 동안 머무는 공간 (전원을 끄면 사라짐) |
| **저장장치(SSD)** | 파일을 영구적으로 보관하는 공간 |

---

## 6. 다음 시간 예고

이제 프로그램이 어떻게 실행되는지 알았으니, 다음 시간에는:
- C 언어의 기본 문법
- 변수와 자료형
- 함수
- 제어 구조 (조건문, 반복문)

를 배울 것입니다.

---

## 참고 자료

- **ISO/IEC 9899:2018** - C Programming Language Standard
- **Kernighan, Brian W., and Dennis M. Ritchie.** *The C Programming Language.* 2nd ed., Prentice Hall, 1988.
